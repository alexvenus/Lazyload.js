/*
 Lazyload.js 0.0.1 Copyright (c) 2011-2012, clickalicious UG - Benjamin Carl All Rights Reserved.
 Available via the MIT or new BSD license.
 see: https://github.com/clickalicious/Lazyload.js for details
*/
(function(){window.Lazyload={isDOMReady:false,Init:function(){if(Lazyload.isDOMReady){return;}var c=document,b=window;var a=[{o:c,m:[["addEventListener","DOMContentLoaded"]]},{o:b,m:[["addEventListener","load"]]},{o:b,m:[["attachEvent","onload"]]}];(function(){var e=0,d=0,g=false;for(e;e<a.length;++e){for(d;d<a[e].m.length;++d){if(a[e].o[a[e].m[d][0]]){return a[e].o[a[e].m[d][0]](a[e].m[d][1],function(){Lazyload.isDOMReady=!g;},g);}}}})();},Tool:{Loader:function(){var C;var v=0;var e=[];var j={autoinstanciate:true,dependencyIdentifier:["classpath","dependency"],classpath:"",provider:"native",caching:true,scope:false,timeout:0,pipesMax:0,debug:{enabled:false,logger:void (0)}};var u=new Lazyload.Tool.Hash.Simple();var m=new Lazyload.Tool.Parser.Annotation();var q=[];var g=0;var d={};var h=[];var p=[];var w=0;var y=document.getElementsByTagName("head")[0];var a=document.getElementsByTagName("body")[0];this.configure=function(E){for(var F in E){j[F]=E[F];}C=(j.debug.enabled)?function(G){j.debug.logger(G);}:function(G){void (0);};switch(E.provider.toString()){case"jquery":case"$":j.provider=function(G){return $("#"+G).get();};break;case"native":default:j.provider=function(G){return document.getElementById(G);};break;}};this.load=function(){if(arguments.length==2&&arguments[1]=="Lazyload.Shortcut"){D(arguments[0]);}else{D(arguments);}};var D=function(){w++;f(z(arguments[0]));};var l=function(E){return{classpath:(E[3])?E[3]:j.classpath,domId:E[0],"arguments":(E[1])?E[1]:false,callback:(E[2])?E[2]:void (0),caching:j.caching,hash:u.calculate(E[0]),lazyClass:"",path:"",file:"",url:"",wait:false,type:"script",target:"head",hashParent:(E[4])?E[4]:false,lazyPackage:{asString:false,asArray:E[0].split(".")}};};var z=function(){var E=arguments[0];if(!q[E[0]]){lazyObject=l(E);lazyObject.lazyClass=lazyObject.lazyPackage.asArray.pop();lazyObject.lazyPackage.asString=lazyObject.lazyPackage.asArray.join(".");lazyObject.path=lazyObject.classpath+lazyObject.lazyPackage.asArray.join("/")+"/";lazyObject.file=lazyObject.lazyClass+".js";lazyObject.url=lazyObject.path+lazyObject.file;q[lazyObject.domId]=lazyObject;}return q[E[0]];};var f=function(E){if(!j.caching||!E.caching||(j.caching&&!d[E.hash])){s(E);}else{t(E);}};var t=function(E){if(E.callback!=undefined){E.callback((j.autoinstanciate)?new window[E.lazyClass](E.arguments):null);}};var s=function(E){if(j.pipesMax==0||g<j.pipesMax){var F=new Lazyload.Tool.Pipe.Xhr();g++;F.create({timeout:j.timeout,url:E.url,preventBrowserCaching:!E.caching,callback:function(H,G){g--;if(G===true){E.source=H.responseText;n(E);}else{C('error: fetching file "'+E.url+'" failed!');}}});F.open();}else{setTimeout(function(){s(E);},10);}};var n=function(E){w--;b(E);B(E.hash,E.hashParent);c(E.classpath,E.source,E.hash);if(w==0){k();}};var b=function(E){d[E.hash]=E;};var B=function(E,F){if(!F){e[v]=[E];}else{if(e[v].contains(F)){v++;e[v]=[];}e[v].push(E);}};var c=function(E,H,I){var F=0,G=o(E,H);for(F;F<G.classes.length;++F){D([G.classes[F],false,void (0),G.classpath,I]);}};var k=function(){if(Lazyload.isDOMReady){var F=e.length-1,E;for(F;F>=0;--F){for(var G=0;G<e[F].length;++G){E=d[e[F][G]];i(E);t(E);}}}else{setTimeout(function(){k();},10);}};var i=function(E){var F=document.createElement((E.type=="script")?"script":"style");F.type="text/"+((E.type=="script")?"javascript":"css");F.id=E.domId;F.defer=true;F.text="\n"+E.source+"\n";(E.target=="head")?y.appendChild(F):a.appendChild(F);};var o=function(E,I){var F=m.parse(I,j.dependencyIdentifier);var G=0,H=[];if(F.length){for(G;G<F.length;++G){switch(F[G][0]){case"classpath":if(F[G][1][0].substr(0,1)=="/"){E=location.protocol+"//"+location.hostname+F[G][1][0];}else{E+=F[G][1][0];}break;case"dependency":H=F[G][1];break;}}}return{classpath:E,classes:H};};var x=function(G){var E=0,F=A(G,(arguments[1])?arguments[1]:void (0));for(E;E<F.length;++E){F[E]();}};var A=function(H){var G=0,F=[],E=(arguments[1])?arguments[1]:void (0);for(G;G<p.length;++G){if(p[G].e==H){if((!E)||(E&&E==p[G].b)){F.push(p[G].f);}}}return F;};if(arguments.length){this.configure(arguments[0]);}Array.prototype.indexOf=function(F,E,H,G){for(E=this,H=E.length,G=-1;~H;G=E[--H]===F?H:G){}return G;};var r=function(E){return this.indexOf(E)!=-1;};Array.prototype.contains=r;String.prototype.contains=r;},Hash:{Djb2:function(){this.calculate=function(c){var a=0,b=5381;for(a;a<c.length;++a){b=((b<<5)+b)+c[a];}return b;};},Simple:function(){this.calculate=function(b){var c=1,a=0;for(c;c<b.length;++c){a+=(b.charCodeAt(c-1)*c)|(b.charCodeAt(c)*(c+1));}return a;};}},Parser:{Annotation:function(){this.parse=function(d){var b,e=[],c=d.match(/(@)[\w\d]+[\s]+[\w\d\/.,]+/g);if(c&&c.length){var a=0;for(a;a<c.length;++a){b=c[a].split(" ");b[0]=b[0].replace("@","");if(!arguments[1]||arguments[1].contains(b[0])){if(b[1].contains(",")){b[1]=b[1].split(",");}else{b[1]=[b[1]];}e.push(b);}}}return e;};}},Pipe:{Xhr:function(){var b;this.create=function(c){(c.preventBrowserCaching!==true)?(c.preventBrowserCaching=false):"";(!c.method)?(c.method="get"):"";(!c.callback)?(c.callback=void (0)):"";b=a();c.url+=(c.preventBrowserCaching)?("?_ac="+new Date().getTime()):"";b.open(c.method,c.url,true);b.callback=c.callback;if(c.timeout>0){b.timestamp=new Date().getTime();b.timer=setTimeout(function(){b.abort();b.callback(this,false);},c.timeout);}b.onreadystatechange=function(){if(b.readyState!=4){return;}clearTimeout(b.timer);b.callback(this,true);};};this.open=function(){return b.send(null);};var a=function(){try{return new XMLHttpRequest();}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(c){}return null;};}}}};Lazyload.Init();}());var require=function(){this.instance;if(!require.instance){require.instance=new Lazyload.Tool.Loader();}if(arguments.length){require.instance.load(arguments,"Lazyload.Shortcut");}else{return require.instance;}};